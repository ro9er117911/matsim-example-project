# 2025-10-29 Taipei PT Smoke Test

## Highlights
- Validated V1 mapped schedule with a five-agent smoke run; SwissRailRaptor stays stable using `useModeMappingForPassengers=false` plus direct `subway` scoring.
- Documented Plan B SpeedyALT mapper configuration, carrying forward V3 search tolerances for a higher-quality re-run.
- Authored PT error handling playbook covering failure modes, commands, and checklists for quick triage.

## Key Fixes & Config Updates
- `scenarios/taipei-metro-test/config.xml` — swapped `planscalcroute` for `routing`, removed PT teleport entries, disabled intermodal access, and added a dedicated `subway` scoring block to avoid Guice conflicts.
- `scenarios/taipei-metro-test/population.xml` — seeded five Blue Line commuters to support rapid PT smoke testing.
- `pt2matsim/work/ptmapper-config-metro-v4.xml` — introduced SpeedyALT mapping (wider search radius, higher cost tolerance, tuned threading).
- `PT_ERROR_HANDLING.md` — consolidated troubleshooting guidance for file loading, routing, vehicle, and memory issues.

## Diagnostics & Testing
- Cleared SwissRailRaptor/TripRouter double-binding and intermodal access errors through config revisions.
- Ran `java -Xmx4g -cp ../../matsim-example-project-0.0.1-SNAPSHOT.jar org.matsim.project.RunMatsim config.xml` from `scenarios/taipei-metro-test` with SUCCESS, 100 % PT mode share.
- Inspected `output/modestats.csv` and targeted agent events to confirm PT boarding/alighting behaviour.

## Outstanding / Follow-up
- Maven build still misses Google Guava; unblock `./mvnw` once repository resolution is fixed.
- Execute Plan B mapping to reduce artificial link share before scaling scenarios.
- Expand population/tests post-mapping and extend scoring if additional PT modes are introduced.

## Artifacts
- Smoke-test results: `scenarios/taipei-metro-test/output`.
- Reference logs/documentation: `/tmp/taipei-final-run.log`, `PT_ERROR_HANDLING.md`.
